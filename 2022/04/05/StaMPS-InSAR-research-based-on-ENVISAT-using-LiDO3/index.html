<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.1.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"mengyuchi.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="IntroThis post is about working steps of StaMPS-InSAR using 13 ENVISAT images in LiDO3. StamPS-InSARStaMPS (Stanford Method for Persistent Scatterers) is a software package that implements an InSAR pe">
<meta property="og:type" content="article">
<meta property="og:title" content="StaMPS-InSAR research based on ENVISAT using LiDO3">
<meta property="og:url" content="http://mengyuchi.github.io/2022/04/05/StaMPS-InSAR-research-based-on-ENVISAT-using-LiDO3/index.html">
<meta property="og:site_name" content="Yuchi&#39;s BLOG">
<meta property="og:description" content="IntroThis post is about working steps of StaMPS-InSAR using 13 ENVISAT images in LiDO3. StamPS-InSARStaMPS (Stanford Method for Persistent Scatterers) is a software package that implements an InSAR pe">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-04-05T13:15:43.000Z">
<meta property="article:modified_time" content="2022-04-14T16:55:51.693Z">
<meta property="article:author" content="Yuchi Meng">
<meta property="article:tag" content="InSAR">
<meta property="article:tag" content="ENVISAT">
<meta property="article:tag" content="LiDO3">
<meta property="article:tag" content="StaMPS">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://mengyuchi.github.io/2022/04/05/StaMPS-InSAR-research-based-on-ENVISAT-using-LiDO3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>StaMPS-InSAR research based on ENVISAT using LiDO3 | Yuchi's BLOG</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Yuchi's BLOG</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">GISer</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://mengyuchi.github.io/2022/04/05/StaMPS-InSAR-research-based-on-ENVISAT-using-LiDO3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.JPG">
      <meta itemprop="name" content="Yuchi Meng">
      <meta itemprop="description" content="BVB und Badminton">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuchi's BLOG">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          StaMPS-InSAR research based on ENVISAT using LiDO3
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-05 15:15:43" itemprop="dateCreated datePublished" datetime="2022-04-05T15:15:43+02:00">2022-04-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-04-14 18:55:51" itemprop="dateModified" datetime="2022-04-14T18:55:51+02:00">2022-04-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/SAR/" itemprop="url" rel="index"><span itemprop="name">SAR</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h1><p>This post is about working steps of StaMPS-InSAR using 13 ENVISAT images in LiDO3.</p>
<h2 id="StamPS-InSAR"><a href="#StamPS-InSAR" class="headerlink" title="StamPS-InSAR"></a>StamPS-InSAR</h2><p>StaMPS (Stanford Method for Persistent Scatterers) is a software package that implements an InSAR persistent scatterer (PS) method developed to work even in terrains devoid of man-made structures and&#x2F;or undergoing non-steady deformation. StaMPS&#x2F;MTI (Multi-Temporal InSAR) is an extended version of StaMPS that also includes a small baseline method and a combined multi-temporal InSAR method. The original development of StaMPS was undertaken at Stanford University, but subsequent development of StaMPS and StaMPS&#x2F;MTI has taken place at the University of Iceland, Delft University of Technology, and the University of Leeds. There are also contributions from users of the package based at other institutions<a target="_blank" rel="noopener" href="https://github.com/dbekaert/StaMPS" title="StaMPS - Stanford Method for Persistent Scatterers">1</a>.</p>
<span id="more"></span>

<p>StaMPS PS analysis is performed within MATLAB, using the main function stamps(), which takes the first and last StaMPS-step as main arguments. To run StaMPS complete with default arguments, use stamps(1,8)<a target="_blank" rel="noopener" href="https://gitlab.com/Rexthor/gis-blog/-/blob/master/StaMPS/2-4_StaMPS-steps.md" title="StaMPS tutorial by Matthias Schloegl">2</a>.</p>
<h2 id="Train"><a href="#Train" class="headerlink" title="Train"></a>Train</h2><p>The Toolbox for Reducing Atmospheric InSAR Noise - TRAIN - is developed in an effort to include current state of the art tropospheric correction methods into the default InSAR processing chain. Initial development was performed at the University of Leeds. The toolbox consists of a combination of command line scripts, shell scripts, and matlab scripts. More information on software is provided in Chapter 3. TRAIN is independent of the used InSAR processor, as long as the data convention is followed. The toolbox is compatible with the StaMPS software. Further initial efforts have been put to include TRAIN into the default -rate processing chain<a target="_blank" rel="noopener" href="https://github.com/dbekaert/TRAIN" title="Bekaert, D.P.S., Walters, R.J., Wright, T.J., Hooper, A.J., and Parker, D.J. (2015c), Statistical comparison of InSAR tropospheric correction techniques, Remote Sensing of Environment, doi: 10.1016/j.rse.2015.08.035">3</a>.</p>
<h1 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h1><ul>
<li><p>edit the StaMPS config file (e.g. via vim .&#x2F;StaMPS&#x2F;StaMPS_CONFIG.bash) to contain the correct paths to StAMPS, SNAPHU and triangle</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># set environment variables:</span></span><br><span class="line"><span class="built_in">export</span> STAMPS=<span class="string">&quot;/home/username/StaMPS&quot;</span></span><br><span class="line"><span class="built_in">export</span> SNAP2STAMPS=<span class="string">&quot;/home/username/snap2stamps&quot;</span></span><br><span class="line">...</span><br><span class="line"><span class="comment">#if triangle and snaphu are not installed through the repositories (i.e. compiled locally):</span></span><br><span class="line"><span class="built_in">export</span> TRIANGLE_BIN=<span class="string">&quot;/home/username/software/triangle/bin&quot;</span></span><br><span class="line"><span class="built_in">export</span> SNAPHU_BIN=<span class="string">&quot;/home/username/software/snaphu/bin&quot;</span></span><br><span class="line">...</span><br><span class="line"><span class="built_in">export</span> MATLABPATH=<span class="variable">$STAMPS</span>/matlab:`<span class="built_in">echo</span> <span class="variable">$MATLABPATH</span>`</span><br><span class="line">...</span><br><span class="line"><span class="comment"># use points not commas for decimals, and give dates in US english</span></span><br><span class="line"><span class="built_in">export</span> LC_NUMERIC=<span class="string">&quot;en_US.UTF-8&quot;</span></span><br><span class="line"><span class="built_in">export</span> LC_TIME=<span class="string">&quot;en_US.UTF-8&quot;</span></span><br><span class="line">...</span><br><span class="line"><span class="built_in">export</span> SAR_TAPE=<span class="string">&quot;/dev/rmt/0mn&quot;</span></span><br><span class="line">...</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;PATH&#125;</span>:<span class="variable">$STAMPS</span>/bin:<span class="variable">$MATLABPATH</span>:<span class="variable">$SNAP2STAMPS</span>/bin</span><br></pre></td></tr></table></figure>

</li>
<li><p>source the StaMPS config file upon opening terminal by adding it to your .bashrc</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># source StaMPS</span></span><br><span class="line"><span class="built_in">source</span> /home/username/StaMPS/StaMPS_CONFIG.bash</span><br></pre></td></tr></table></figure>

</li>
<li><p>do the same thing for your TRAIN (APS_toolbox) config file</p>
<ul>
<li>adjust path in the APS_CONFIG file  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> APS_toolbox=<span class="string">&quot;/home/username/TRAIN&quot;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>  -source it upon opening a terminal<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># add TRAIN config</span></span><br><span class="line"><span class="built_in">source</span> /home/username/TRAIN/APS_CONFIG.sh</span><br></pre></td></tr></table></figure></p>
</li>
<li><p>install dependencies</p>
</li>
</ul>
<blockquote>
<p>gwak and tsch was already installed in LiDO3, thank god!</p>
</blockquote>
<h1 id="Process"><a href="#Process" class="headerlink" title="Process"></a>Process</h1><h2 id="Pre-stamps"><a href="#Pre-stamps" class="headerlink" title="Pre-stamps"></a>Pre-stamps</h2><p>In Stamps official tutorial there is ‘INSAR_master_date’ folder, after search answers in STEP forum, we found the perfect resolution,</p>
<blockquote>
<p>I am about to start my step 4- PS processing the ‘PSI’ folder which i obtained from stamps export in windows environment has four folders in it ‘dem’, ‘diff0’, ‘geo’ and ‘rslc’. The following are my queries:</p>
</blockquote>
<blockquote>
<p>Can i proceed or should i rename any of the folders to proceed? In which path should i place this PSI folder?</p>
</blockquote>
<ul>
<li><p>Answer<a target="_blank" rel="noopener" href="https://forum.step.esa.int/t/workflow-between-snap-and-stamps/3211/512" title="step forum @falahfakhri">4</a></p>
<p>  1-move the ‘PSI’ folder to your Linux directory,</p>
<p>  2- use the shell to create a new folder, (LINUX)</p>
<p>  mkdir ~&#x2F;INSAR_master_date</p>
<p>  3- copy the folder ‘PSI’ into this folder ‘INSAR_master_date’</p>
<p>  cp -&#x2F;PSI -&#x2F;INSAR_master_date</p>
<p>  Now you’re ready to start as explained in the previous post.</p>
</li>
</ul>
<h2 id="Pre-Matlab-Processing"><a href="#Pre-Matlab-Processing" class="headerlink" title="Pre-Matlab Processing"></a>Pre-Matlab Processing</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">module avail</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">module matlab</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">matlab</span></span><br></pre></td></tr></table></figure>

<p>Working in LiDO3 with ThinLinc Client</p>
<p>cd &#x2F;work&#x2F;smyumeng&#x2F;ENCISAT_project </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">source</span> /work/smyumeng/StaMPS/StaMPS_CONFIG.bash</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">module add matlab</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">mt_prep_snap 20070602 /work/smyumeng/ENVISAT_project/INSAR_20070602 0.4 3 2 50 200</span></span><br><span class="line"></span><br><span class="line">working...</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Matlab"><a href="#Matlab" class="headerlink" title="Matlab"></a>Matlab</h2><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; ps_info</span><br><span class="line">  <span class="number">1</span>  <span class="number">17</span>-Jun<span class="number">-2006</span>     <span class="number">0</span> m</span><br><span class="line">  <span class="number">2</span>  <span class="number">22</span>-Jul<span class="number">-2006</span>   <span class="number">757</span> m</span><br><span class="line">  <span class="number">3</span>  <span class="number">26</span>-Aug<span class="number">-2006</span>   <span class="number">391</span> m</span><br><span class="line">  <span class="number">4</span>  <span class="number">04</span>-Nov<span class="number">-2006</span>  <span class="number">-805</span> m</span><br><span class="line">  <span class="number">5</span>  <span class="number">09</span>-Dec<span class="number">-2006</span>    <span class="number">18</span> m</span><br><span class="line">  <span class="number">6</span>  <span class="number">17</span>-Feb<span class="number">-2007</span>  <span class="number">-245</span> m</span><br><span class="line">  <span class="number">7</span>  <span class="number">28</span>-Apr<span class="number">-2007</span>  <span class="number">-168</span> m</span><br><span class="line">  <span class="number">8</span>  <span class="number">02</span>-Jun<span class="number">-2007</span>   <span class="number">-87</span> m</span><br><span class="line">  <span class="number">9</span>  <span class="number">07</span>-Jul<span class="number">-2007</span>  <span class="number">-261</span> m</span><br><span class="line"> <span class="number">10</span>  <span class="number">11</span>-Aug<span class="number">-2007</span>  <span class="number">-251</span> m</span><br><span class="line"> <span class="number">11</span>  <span class="number">15</span>-Sep<span class="number">-2007</span>   <span class="number">151</span> m</span><br><span class="line"> <span class="number">12</span>  <span class="number">20</span>-Oct<span class="number">-2007</span>  <span class="number">-277</span> m</span><br><span class="line"> <span class="number">13</span>  <span class="number">02</span>-Feb<span class="number">-2008</span>  <span class="number">-142</span> m</span><br><span class="line">Number of stable-phase pixels: <span class="number">1364212</span></span><br></pre></td></tr></table></figure>

<h3 id="Step-1-Load-Data"><a href="#Step-1-Load-Data" class="headerlink" title="Step 1: Load Data"></a>Step 1: Load Data</h3><blockquote>
<p>Converts the data into the formats required for PS processing and stores them in matlab workspaces.</p>
</blockquote>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; stamps(<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">STAMPS: ########################################</span><br><span class="line">STAMPS: ####### StaMPS/MTI Version <span class="number">4.0</span>b6 #######</span><br><span class="line">STAMPS: #######  Beta version, Jun <span class="number">2018</span>  #######</span><br><span class="line">STAMPS: ########################################</span><br><span class="line"></span><br><span class="line">STAMPS: Will process current directory only</span><br><span class="line"></span><br><span class="line">STAMPS: ########################################</span><br><span class="line">STAMPS: ################ Step <span class="number">1</span> ################</span><br><span class="line">STAMPS: ########################################</span><br><span class="line">STAMPS: Directory is PATCH_1</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">Rotating by <span class="number">-10.9782</span> degrees</span><br><span class="line">PS_LOAD_INITIAL_GAMMA: Finished</span><br><span class="line">STAMPS: Finished</span><br></pre></td></tr></table></figure>

<h3 id="Step-2-Estimate-phase-noise"><a href="#Step-2-Estimate-phase-noise" class="headerlink" title="Step 2: Estimate phase noise"></a>Step 2: Estimate phase noise</h3><blockquote>
<p>This is an iterative step that estimates the phase noise value for each candidate pixel in every interferogram.</p>
</blockquote>
<p>Error in step2</p>
<blockquote>
<p>Index in position 1 is invalid. Array indices must be positive integers or logical values.</p>
<p>Error in ps_est_gamma_quick (line 236) ph_grid(grid_ij(i,1),grid_ij(i,2),:)&#x3D;ph_grid(grid_ij(i,1),grid_ij(i,2),:)+shiftdim(ph_weight(i,:),-1);</p>
<p>Error in stamps (line 326)<br>ps_est_gamma_quick(est_gamma_parm);</p>
</blockquote>
<pre><code>Solution: 

You may try with this function I have modified time ago. I hope it works for you. [ps_load_initial_gamma.m](https://forum.step.esa.int/uploads/default/original/2X/6/66b076f51da0e68543126e37dccc38937f5806d6.m). It should be used on the stamps step 1. So before you override the current one on the stamps_v4.1b/matlab/ please make a backup. Then please run again the command stamps(1,1) so you re-run step1 to use this function Let me know if this helps[5].
</code></pre>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; stamps(<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">...working</span><br><span class="line"></span><br><span class="line">PS_EST_GAMMA_QUICK: gamma_change_change=<span class="number">0.000000</span></span><br><span class="line">GETPARM: gamma_change_convergence=<span class="number">0.005</span> </span><br><span class="line">GETPARM: gamma_max_iterations=<span class="number">3</span> </span><br><span class="line">PS_EST_GAMMA_QUICK: Finished</span><br></pre></td></tr></table></figure>

<h3 id="Step-3-PS-selection"><a href="#Step-3-PS-selection" class="headerlink" title="Step 3: PS selection"></a>Step 3: PS selection</h3><p>Pixels are selected on the basis of their noise characteristics. This step also estimates the percentage of random (non-PS) pixels in a scene from which the density per km2 can be obtained. </p>
<p>Processing is controlled by the following parameters:</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; stamps(<span class="number">3</span>,<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">STAMPS: ########################################</span><br><span class="line">STAMPS: ####### StaMPS/MTI Version <span class="number">4.0</span>b6 #######</span><br><span class="line">STAMPS: #######  Beta version, Jun <span class="number">2018</span>  #######</span><br><span class="line">STAMPS: ########################################</span><br><span class="line"></span><br><span class="line">working...</span><br><span class="line"></span><br><span class="line">Warning: Not enough random phase pixels to set <span class="built_in">gamma</span> threshold - using default threshold of <span class="number">0.3</span> </span><br><span class="line">&gt; In ps_select (line <span class="number">184</span>)</span><br><span class="line">In stamps (line <span class="number">356</span>) </span><br><span class="line">PS_SELECT: Initial <span class="built_in">gamma</span> threshold: <span class="number">0.300</span> at D_A=<span class="number">0.07</span> to <span class="number">0.300</span> at D_A=<span class="number">0.40</span></span><br><span class="line">PS_SELECT: <span class="number">0</span> PS selected initially</span><br><span class="line">PS_SELECT: Reestimation <span class="built_in">gamma</span> threshold: <span class="number">0.300</span> at D_A=<span class="number">0.07</span> to <span class="number">0.300</span> at D_A=<span class="number">0.40</span></span><br><span class="line">PS_SELECT: <span class="number">0</span> ps selected after re-estimation of coherence</span><br><span class="line">***No PS points left. Updating the stamps <span class="built_in">log</span> <span class="keyword">for</span> this****</span><br><span class="line">PS_SELECT: Finished</span><br></pre></td></tr></table></figure>
<h3 id="Step-4"><a href="#Step-4" class="headerlink" title="Step 4:"></a>Step 4:</h3><p>No Aavailable PS points in every batch (1-6), still finding solution. If can not solve, then qiut ENVISAT PS processing in LiDO3.</p>
<p>Update: After setting <code>clap_beta</code> to 0.6, batch_3 resulted 6006 PS selected initally, so we reset parameter and redo stamps(1,5)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Slurm"><a href="#Slurm" class="headerlink" title="Slurm"></a>Slurm</h2><p>This section is about test run for slurm to control batch jobs and cluster resources<a target="_blank" rel="noopener" href="https://www.lido.tu-dortmund.de/cms/de/LiDO3/index.html" title="LiDO3 page">6</a>.</p>
<table>
<thead>
<tr>
<th>Queue</th>
<th>max. wlltime</th>
<th>remake</th>
</tr>
</thead>
<tbody><tr>
<td>short</td>
<td>02:00:00</td>
<td>&#x2F;</td>
</tr>
<tr>
<td>med</td>
<td>08:00:00</td>
<td>&#x2F;</td>
</tr>
<tr>
<td>long</td>
<td>2-00:00:00</td>
<td>&#x2F;</td>
</tr>
<tr>
<td>ultralong</td>
<td>28-00:00:00</td>
<td>no GPU or “non-bolcking” nodes</td>
</tr>
<tr>
<td>testpart</td>
<td>02:00:00</td>
<td>use when instructed by LiDO3 administrators</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> stamps_batch_script.sh</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash -l</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">SBATCH --partition=med</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">SBATCH --nodes=4</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">SBATCH --ntasks-per-node=3</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">SBATCH --time=0:30</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">SBATCH --mem-per-cpu=100</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">SBATCH --job-name=stampsbatch</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">SBATCH --output=/work/smyumeng/project/ENVISAT/stampsbatch.out.txt</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">SBATCH --constraint=cstd01</span></span><br><span class="line">srun </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sbatch my_submit_script.sh</span><br><span class="line"></span><br><span class="line">$ scontrol show job 13891 </span><br></pre></td></tr></table></figure>

<h3 id="SBATCH-to-run-jobs"><a href="#SBATCH-to-run-jobs" class="headerlink" title="SBATCH to run jobs"></a>SBATCH to run jobs</h3><blockquote>
<p>Script dir: &#x2F;work&#x2F;smyumeng&#x2F;project&#x2F;script</p>
</blockquote>
<ul>
<li>Create script to atuo run stamps jobs in LiDO.</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[smyumeng@gw02 scripts]$ echo &gt; stamps_testrun.sh #create .sh file</span><br><span class="line">[smyumeng@gw02 scripts]$ </span><br></pre></td></tr></table></figure>
<ul>
<li>Edit stamps_testrun.sh<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash -l</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">SBATCH --job-name=StampsTestRun</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">SBATCH --time=0-1:00:00</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">SBATCH --partition=short</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">SBATCH --constraint=cquad01|cgpu01</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ask <span class="keyword">for</span> ten compute cores on one compute node</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">SBATCH --nodes=6 --ntasks-per-node=1 --cpus-per-task=20</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">SBATCH --nodes=1 --ntasks-per-node=1 --cpus-per-task=20 <span class="comment">#One node for ENVISAT</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">memory requirement per core <span class="keyword">in</span> megabytes</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">SBATCH --mem-per-cpu=2G</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">SBATCH --output=/work/smyumeng/tmp/slurm_job</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">SBATCH --error=/work/smyumeng/tmp/slurm_job</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">send mail when <span class="built_in">jobs</span> starts, end, fails, gets requeued etc.</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">SBATCH --mail-type=ALL</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">SBATCH --mail-user=yuchi.meng@tu-dortmund.de</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">source /work/smyumeng/StaMPS/StaMPS_CONFIG.bash </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cd</span> /work/smyumeng/ENCISAT_project/</span></span><br><span class="line">module add matlab</span><br><span class="line">srun matlab -nodisplay -nosplash -r &#x27;cd /work/smyumeng/ENVISAT_project/PATCH_1;stamps(1,5);quit&#x27;</span><br><span class="line">srun matlab -nodisplay -nosplash -r &#x27;cd /work/smyumeng/ENVISAT_project/PATCH_2;stamps(1,5);quit&#x27;</span><br><span class="line">srun matlab -nodisplay -nosplash -r &#x27;cd /work/smyumeng/ENVISAT_project/PATCH_3;stamps(1,5);quit&#x27;</span><br><span class="line">srun matlab -nodisplay -nosplash -r &#x27;cd /work/smyumeng/ENVISAT_project/PATCH_4;stamps(1,5);quit&#x27;</span><br><span class="line">srun matlab -nodisplay -nosplash -r &#x27;cd /work/smyumeng/ENVISAT_project/PATCH_5;stamps(1,5);quit&#x27;</span><br><span class="line">srun matlab -nodisplay -nosplash -r &#x27;cd /work/smyumeng/ENVISAT_project/PATCH_6;stamps(1,5);quit&#x27;</span><br><span class="line">echo &quot;executing SLURM_JOB_ID $SLURM_JOB_ID (SLURM_TASK_PID $SLURM_TASK_PID) on $SLURM_NODENAME&quot;</span><br><span class="line">sleep 10</span><br><span class="line">echo &quot;worker ($SLURM_NODENAME):stop&quot;</span><br><span class="line">wait</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Error:</p>
  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">STAMPS: Will process current directory only</span><br><span class="line">STAMPS: ########################################</span><br><span class="line">STAMPS: ################ Step 1 ################</span><br><span class="line">STAMPS: ########################################</span><br><span class="line">STAMPS: Directory is scripts</span><br><span class="line"></span><br><span class="line">PS_LOAD_INITIAL: Starting</span><br><span class="line">PS_LOAD_INITIAL: Loading data into matlab...</span><br><span class="line">&#123;Error using load</span><br><span class="line">Unable to read file &#x27;../day.1.in&#x27;. No such file or directory.</span><br></pre></td></tr></table></figure></blockquote>
</li>
</ul>
<blockquote>
<p>Solution:<br>    <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">missset the working dir in matlab command</span><br></pre></td></tr></table></figure></p>
</blockquote>
<pre><code><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">module add matlab</span><br><span class="line">srun matlab -nodisplay -nosplash -r &#x27;cd /work/smyumeng/ENVISAT_project;stamps(1,5);quit</span><br></pre></td></tr></table></figure>
</code></pre>

    </div>

    
    
    
        <div class="reward-container">
  <div></div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    Donate
  </button>
  <div id="qr" style="display: none;">

  </div>
</div>

        

  <div class="followme">
    <p>Welcome to my other publishing channels</p>

    <div class="social-list">

        <div class="social-item">
          <a target="_blank" class="social-link" href="/images/wechat_channel.jpg">
            <span class="icon">
              <i class="fab fa-weixin"></i>
            </span>

            <span class="label">WeChat</span>
          </a>
        </div>
    </div>
  </div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/InSAR/" rel="tag"># InSAR</a>
              <a href="/tags/ENVISAT/" rel="tag"># ENVISAT</a>
              <a href="/tags/LiDO3/" rel="tag"># LiDO3</a>
              <a href="/tags/StaMPS/" rel="tag"># StaMPS</a>
              <a href="/tags/Linux/" rel="tag"># Linux</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/04/01/Getting-into-Land-Subsidence-Mornitoiring-useing-ENVISAT-Dataset/" rel="prev" title="Getting into Land Subsidence Mornitoiring using ENVISAT Dataset">
      <i class="fa fa-chevron-left"></i> Getting into Land Subsidence Mornitoiring using ENVISAT Dataset
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/04/07/Land-subsidence-in-Xuzhou-using-Sentinel1A-PS-InSAR-in-SARScape/" rel="next" title="Land subsidence in Xuzhou using Sentinel1A PS-InSAR in SARScape">
      Land subsidence in Xuzhou using Sentinel1A PS-InSAR in SARScape <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Intro"><span class="nav-number">1.</span> <span class="nav-text">Intro</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#StamPS-InSAR"><span class="nav-number">1.1.</span> <span class="nav-text">StamPS-InSAR</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Train"><span class="nav-number">1.2.</span> <span class="nav-text">Train</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Configuration"><span class="nav-number">2.</span> <span class="nav-text">Configuration</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Process"><span class="nav-number">3.</span> <span class="nav-text">Process</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Pre-stamps"><span class="nav-number">3.1.</span> <span class="nav-text">Pre-stamps</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pre-Matlab-Processing"><span class="nav-number">3.2.</span> <span class="nav-text">Pre-Matlab Processing</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Matlab"><span class="nav-number">3.3.</span> <span class="nav-text">Matlab</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Step-1-Load-Data"><span class="nav-number">3.3.1.</span> <span class="nav-text">Step 1: Load Data</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Step-2-Estimate-phase-noise"><span class="nav-number">3.3.2.</span> <span class="nav-text">Step 2: Estimate phase noise</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Step-3-PS-selection"><span class="nav-number">3.3.3.</span> <span class="nav-text">Step 3: PS selection</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Step-4"><span class="nav-number">3.3.4.</span> <span class="nav-text">Step 4:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Slurm"><span class="nav-number">3.4.</span> <span class="nav-text">Slurm</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SBATCH-to-run-jobs"><span class="nav-number">3.4.1.</span> <span class="nav-text">SBATCH to run jobs</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Yuchi Meng"
      src="/images/avatar.JPG">
  <p class="site-author-name" itemprop="name">Yuchi Meng</p>
  <div class="site-description" itemprop="description">BVB und Badminton</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">14</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">19</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/mengyuchi" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;mengyuchi" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:mengyuchile@gmail.com" title="E-Mail → mailto:mengyuchile@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/mengyuchile" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;mengyuchile" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://instagram.com/yuuchiiiiiiiiii" title="Instagram → https:&#x2F;&#x2F;instagram.com&#x2F;yuuchiiiiiiiiii" rel="noopener" target="_blank"><i class="fab fa-instagram fa-fw"></i>Instagram</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yuchi Meng</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
