

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Yuchi Meng">
  <meta name="keywords" content="">
  
    <meta name="description" content="Intro This post is about working in Land Subsidence in Feng-Pei county in Xuzhou city. Cause the only free and available SAR dataset in this area is Sentinel-1A, so we downloaded 20 scenes SLC data t">
<meta property="og:type" content="article">
<meta property="og:title" content="Xuzhou Feng-Pei County using Sentinel1A in LiDO3">
<meta property="og:url" content="http://mengyuchi.github.io/2022/04/20/Xuzhou-Feng-Pei-County-using-Sentinel1A-in-LiDO3/index.html">
<meta property="og:site_name" content="Yuchi&#39;s BLOG">
<meta property="og:description" content="Intro This post is about working in Land Subsidence in Feng-Pei county in Xuzhou city. Cause the only free and available SAR dataset in this area is Sentinel-1A, so we downloaded 20 scenes SLC data t">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://mengyuchi.github.io/2022/04/20/Xuzhou-Feng-Pei-County-using-Sentinel1A-in-LiDO3/StaMPS_v_do_1st.png">
<meta property="article:published_time" content="2022-04-20T07:06:21.000Z">
<meta property="article:modified_time" content="2022-04-27T08:38:09.578Z">
<meta property="article:author" content="Yuchi Meng">
<meta property="article:tag" content="InSAR">
<meta property="article:tag" content="Land Subsidence">
<meta property="article:tag" content="Sentinel1-A">
<meta property="article:tag" content="PS-InSAR">
<meta property="article:tag" content="StaMPS-InSAR">
<meta property="article:tag" content="Xuzhou">
<meta property="article:tag" content="LiDO3">
<meta property="article:tag" content="snap2stamps">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://mengyuchi.github.io/2022/04/20/Xuzhou-Feng-Pei-County-using-Sentinel1A-in-LiDO3/StaMPS_v_do_1st.png">
  
  
  <title>Xuzhou Feng-Pei County using Sentinel1A in LiDO3 - Yuchi&#39;s BLOG</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hint.css@2/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"mengyuchi.github.io","root":"/","version":"1.8.14","typing":{"enable":true,"typeSpeed":50,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 6.1.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                Home
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                Archives
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                Categories
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                Tags
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                About
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                Links
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/post_banner/PSI_techniques.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Xuzhou Feng-Pei County using Sentinel1A in LiDO3">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2022-04-20 09:06" pubdate>
        April 20, 2022 am
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      8.5k 字
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      72 分钟
    </span>
  

  
  
    
      <!-- 不蒜子统计文章PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> 次
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Xuzhou Feng-Pei County using Sentinel1A in LiDO3</h1>
            
            <div class="markdown-body">
              <h1 id="intro"><a class="markdownIt-Anchor" href="#intro"></a> Intro</h1>
<p>This post is about working in Land Subsidence in Feng-Pei county in Xuzhou city. Cause the only free and available SAR dataset in this area is Sentinel-1A, so we downloaded 20 scenes SLC data to process.</p>
<span id="more"></span>
<h1 id="snap2stamps-process-in-lido"><a class="markdownIt-Anchor" href="#snap2stamps-process-in-lido"></a> snap2stamps process in LiDO</h1>
<h2 id="errors-and-solutions"><a class="markdownIt-Anchor" href="#errors-and-solutions"></a> Errors and Solutions</h2>
<h3 id="error-1-no-pathlib-found-in-python-module"><a class="markdownIt-Anchor" href="#error-1-no-pathlib-found-in-python-module"></a> <em>Error 1 No pathlib found in python module</em></h3>
<p><strong>Solution</strong></p>
<blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">from</span> pathlib2 <span class="hljs-keyword">import</span> Path<br></code></pre></td></tr></table></figure>
</blockquote>
<h3 id="error-2-error-nodeid-apply-orbit-file-qcsentinel1eoesaint-name-or-service-not-known"><a class="markdownIt-Anchor" href="#error-2-error-nodeid-apply-orbit-file-qcsentinel1eoesaint-name-or-service-not-known"></a> <em>Error 2 Error: [NodeId: Apply-Orbit-File] qc.sentinel1.eo.esa.int: Name or service not known</em></h3>
<blockquote>
<p><strong>Solution</strong></p>
<p>Both indicates outdated SNAP versions, run Menu &gt; Help &gt; Check for Updates?</p>
<p>the most recent version is 8.0.4 (Menu &gt; Help &gt; About SNAP)<a target="_blank" rel="noopener" href="https://forum.step.esa.int/t/apply-orbit-file-qc-sentinel1-eo-esa-int-name-or-service-not-know/14877/6" title="STEP Forum">1</a></p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">cd</span> /work/smyumeng/snap/bin</span> <br><span class="hljs-meta prompt_">$ </span><span class="language-bash">./snap</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">update <span class="hljs-keyword">in</span> SNAP GUI</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-built_in">cd</span> to downloaded esa-snap_sentinel_unix_8_0.sh</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">properties-permission-Allow executing file as program</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">./esa-snap_sentinel_unix_8_0.sh</span><br></code></pre></td></tr></table></figure>
<h3 id="error-3-nodeid-interferogram-orgjblasnativeblasdgemm"><a class="markdownIt-Anchor" href="#error-3-nodeid-interferogram-orgjblasnativeblasdgemm"></a> <em>Error 3 [NodeId: Interferogram] org.jblas.NativeBlas.dgemm</em></h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs shell">SNAP STDOUT:INFO: org.esa.snap.core.gpf.operators.tooladapter.ToolAdapterIO: Initializing external tool adapters<br>INFO: org.esa.s2tbx.dataio.gdal.GDALVersion: GDAL not found on system. Internal GDAL 3.0.0 from distribution will be used. (f1)<br>INFO: org.esa.s2tbx.dataio.gdal.GDALVersion: Internal GDAL 3.0.0 set to be used by SNAP.<br>INFO: org.esa.snap.core.util.EngineVersionCheckActivator: Please check regularly for new updates for the best SNAP experience.<br>INFO: org.esa.s2tbx.dataio.gdal.GDALVersion: Internal GDAL 3.0.0 set to be used by SNAP.<br>Executing processing graph<br>INFO: org.hsqldb.persist.Logger: dataFileCache open start<br>-- org.jblas ERROR Couldn&#x27;t load copied link file: java.lang.UnsatisfiedLinkError: /tmp/jblas8683114676634715002/libquadmath-0.so: /lib64/libm.so.6: version `GLIBC_2.23&#x27; not found (required by /tmp/jblas8683114676634715002/libquadmath-0.so).<br><br>WARNING: org.esa.s1tbx.insar.gpf.coregistration.CreateStackOp: Unable to calculate baselines. org.jblas.NativeBlas.dgemm(CCIIID[DII[DIID[DII)V<br>org.jblas.NativeBlas.dgemm(CCIIID[DII[DIID[DII)V<br> done.<br><br>Error: [NodeId: Interferogram] org.jblas.NativeBlas.dgemm(CCIIID[DII[DIID[DII)V<br>-- org.jblas INFO Deleting /tmp/jblas8683114676634715002/libquadmath-0.so<br>-- org.jblas INFO Deleting /tmp/jblas8683114676634715002<br></code></pre></td></tr></table></figure>
<p><strong>Solution</strong></p>
<blockquote>
<p>My workaround linking the v7 jblas.jar, suggested in the first post in this thread, only worked until an update was applied, which unfortunately overwrote the linked files in v7<a target="_blank" rel="noopener" href="https://step.esa.int/main/download/snap-download/previous-versions/" title="Previous Versions of SNAP">3</a>. So linking was not the best solution. I had to download v7 again to get the jblas.jar<a target="_blank" rel="noopener" href="https://forum.step.esa.int/t/8-0-x-centos-7-jblas-static-and-dynamic-libraries/27688" title="STEP Forum">2</a>.</p>
<p>If you have this issue, I recommend keeping a copy of the v7 jblas.jar so you can overwrite the file if it is required after it is replaced by an update. The workaround uses the v7 jblas.jar which is linked to older GLIBC library. Just copy the v7 file:</p>
</blockquote>
<blockquote>
<p>snap_7.0.4/s1tbx/modules/ext/org.jlinda.jlinda-core/org-jblas/jblas.jar</p>
</blockquote>
<p>over both:</p>
<blockquote>
<p>snap_8.0.9/s1tbx/modules/ext/org.jlinda.jlinda-core/org-jblas/jblas.jar<br />
snap_8.0.9/s1tbx/modules/ext/org.jlinda.jlinda-nest/org-jblas/jblas.jar</p>
</blockquote>
<h2 id="snap2staps"><a class="markdownIt-Anchor" href="#snap2staps"></a> snap2staps</h2>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">module avail</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">module add python/2.7.18</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">usual python commands</span><br></code></pre></td></tr></table></figure>
<h2 id="stamps-process"><a class="markdownIt-Anchor" href="#stamps-process"></a> StaMPS Process</h2>
<p>After snap2stamps, move folder to /work/smyumeng/Sentinel_PS/Feng-Pei/, start stamps processing with slurm scripts in folder /work/smyumeng/project/scripts/.</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ mt_prep_snap <span class="hljs-number">20161028</span> <span class="hljs-regexp">/work/</span>smyumeng<span class="hljs-regexp">/Sentinel_PS/</span>Feng_Pei/INSAR_20161028 <span class="hljs-number">0.4</span> <span class="hljs-number">2</span> <span class="hljs-number">1</span> <span class="hljs-number">50</span> <span class="hljs-number">200</span><br></code></pre></td></tr></table></figure>
<p>Prefilter phase before unwrapping to reduce noise. SCLA and AOE subtraction is applied when step 6 is redone after step 7. To avoid subtraction use <em>scla_reset</em>.</p>
<blockquote>
<p>Note In case of re-running Step 6 after a full StaMPS run, estimates of SCLA and master atmosphere and orbit error (AOE) will be subtracted before unwrapping. If you do not wish this to occur, reset these estimates before running Step 6 again with <em>scla_reset</em>. This is useful if one is interested in local signals only, or when looking for landslides in a larger area. This subtraction of SCLA and master AOE has not been implemented with the <em>unwrap_prefilter_flag = ‘n’</em> option.)</p>
</blockquote>
<h3 id="how-to-process-in-stamps"><a class="markdownIt-Anchor" href="#how-to-process-in-stamps"></a> How to process in StaMPS</h3>
<blockquote>
<p>run steps 1-6<a target="_blank" rel="noopener" href="https://github.com/gjvanleeuwen/SNAP-StaMPS-Visualizing" title="SNAP-StaMPS workflow documentation">5</a><br />
check <code>ps_plot ('u')</code><br />
add bad ifgs to scla_drop_index<br />
run step 7<br />
check <code>ps_plot('u-dm')</code> is generally smoother<br />
rerun step 6<br />
check <code>ps_plot('u')</code><br />
remove ifgs that have improved in unwrapping result from scla_index and rerun step 7<br />
rerun step 6 and check again.<br />
keep doing this process until results are satisfying and command: <code>ps_plot('v-do'. 'ts')</code> to check if the total velocities are okay, if result is not &gt; satisfying try:</p>
</blockquote>
<blockquote>
<p>rerun from step 6 with more goldstein filtering<br />
rerun from step 5 with a higher <code>merge_resample_size</code><br />
rerun from step 4 with changes to the <code>weed_standard_dev</code> parameter<br />
rerun from step 2 with bad ifgs added to <code>drop_ifg_index</code> and possible changes to parameters step 2 and 3</p>
</blockquote>
<p>set your reference location for plotting using:</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs MATLAB">setparm(<span class="hljs-string">&#x27;ref_centre_lonlat&#x27;</span> , [lon lat])<br>setparm(<span class="hljs-string">&#x27;ref_radius&#x27;</span>, radius_m)<br></code></pre></td></tr></table></figure>
<p>if all results are satisfying make a kml file with all data for visualization:</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs MATLAB"><span class="hljs-comment">% save PS velocity estimation to a mat file</span><br>&gt;&gt; ps_plot(<span class="hljs-string">&#x27;v-d&#x27;</span>, <span class="hljs-number">-1</span>)<br><span class="hljs-comment">% load matfile</span><br>&gt;&gt; load ps_plot_v-d<br><span class="hljs-comment">% save ps.kml (generated from ph_disp for every 10 points with an opacity of 0.4</span><br>&gt;&gt; ps_gescatter(<span class="hljs-string">&#x27;ps.kml&#x27;</span>,ph_disp,<span class="hljs-number">10</span>,<span class="hljs-number">0.4</span>)<br></code></pre></td></tr></table></figure>
<p>or make a csv file with all data vor visualizations:</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs MATLAB">ps_plot(<span class="hljs-string">&#x27;v-do&#x27;</span>, <span class="hljs-string">&#x27;ts&#x27;</span>);<br><span class="hljs-comment">% after the plot has appeared magically, set radius and location by clicking into the plot</span><br>load parms.mat;<br>ps_plot(<span class="hljs-string">&#x27;v-do&#x27;</span>, <span class="hljs-number">-1</span>);<br>load ps_plot_v-do.mat;<br>lon2_str = cellstr(num2str(lon2));<br>lat2_str = cellstr(num2str(lat2));<br>lonlat2_str = strcat(lon2_str, lat2_str);<br><br>lonlat_str = strcat(cellstr(num2str(lonlat(:,<span class="hljs-number">1</span>))), cellstr(num2str(lonlat(:,<span class="hljs-number">2</span>))));<br>ind = <span class="hljs-built_in">ismember</span>(lonlat_str, lonlat2_str);<br><br><span class="hljs-built_in">disp</span> = ph_disp(ind);<br>disp_ts = ph_mm(ind,:);<br>export_res = [lon2 lat2 <span class="hljs-built_in">disp</span> disp_ts];<br><br>metarow = [ref_centre_lonlat NaN transpose(day)<span class="hljs-number">-1</span>];<br>k = <span class="hljs-number">0</span>;<br>export_res = [export_res(<span class="hljs-number">1</span>:k,:); metarow; export_res(k+<span class="hljs-number">1</span>:<span class="hljs-keyword">end</span>,:)];<br>export_res = <span class="hljs-built_in">table</span>(export_res);<br><span class="hljs-built_in">writetable</span>(export_res,<span class="hljs-string">&#x27;stamps_tsexport.csv&#x27;</span>)<br></code></pre></td></tr></table></figure>
<p>if you want to use TRAIN check the <a target="_blank" rel="noopener" href="http://davidbekaert.com/download/TRAIN_manual.pdf">TRAIN manual</a> but using linear correction try this:</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs MATLAB">aps_linear<br>ps_plot(<span class="hljs-string">&#x27;v-dao&#x27;</span> , <span class="hljs-string">&#x27;a_linear&#x27;</span> , <span class="hljs-string">&#x27;ts&#x27;</span>)<br></code></pre></td></tr></table></figure>
<h2 id="stamps-plotting"><a class="markdownIt-Anchor" href="#stamps-plotting"></a> StaMPS Plotting</h2>
<p>Display <strong>wrapped phase</strong> with</p>
<ul>
<li><code>&gt;&gt;ps_plot('w')</code>: Check the wrapped phase of the selected pixels. In terms of reprocessing, the first parameter to play with is <code>weed_standard_dev</code>. If it looks like too many noisy pixels are being chosen, the value can be reduced. If very few pixels are chosen, the value can be increased. If still too few pixels are being selected such that any signal is generally undersampled, variation of Step 2 parameters can be tried. The number of initial candidates can also be increased by setting the amplitude dispersion higher in <code>mt_prep</code> (step 5)<a target="_blank" rel="noopener" href="https://github.com/dbekaert/StaMPS/releases/tag/v4.1-beta" title="StaMPS 4.1-beta Manual">4</a>.</li>
</ul>
<p>Display <strong>unwrapping error</strong> with</p>
<ul>
<li><code>&gt;&gt;ps_plot('u')</code>: Check for unwrapping errors i.e., phase jumps in space which are uncorrelated in time (step 6). Pay attention to the color scale. It may help to set it to a narrower range <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mo>−</mo><mn>2</mn><mi>π</mi><mo separator="true">,</mo><mn>2</mn><mi>π</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[-2\pi,2\pi]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">−</span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="mclose">]</span></span></span></span>. Unwrapping errors are more likely to occur in longer perpendicular baseline interferograms. This is for two reasons, firstly there is more noise associated with each PS pixel, and secondly, the phase due to any <strong>spatially-correlated look angle (SCLA)</strong> error is larger, as it is proportional to perpendicular baseline. Noise is reduced by spatial filtering before unwrapping, but it is also possible to reduce the SCLA error phase by estimating the SCLA error from the interferograms that have been unwrapped OK by running Step 7. If Step 6 is re-run after Step 7 has been run, the SCLA error phase is temporarily subtracted from the wrapped phase before unwrapping. The unwrapping accuracy is further improved by also temporarily subtracting the <strong>atmosphere and orbit error (AOE)</strong> phase of the master image, present in all the interferograms, which is also estimated in Step 7.</li>
</ul>
<p>Display the estimate of <strong>SCLA error</strong> with</p>
<ul>
<li><code>&gt;&gt;ps plot('d')</code>: Units are phase per m of perpendicular baseline, with 0.01 radians/m corresponding to about 12 m of DEM error for the Envisat I2 swath. You can use <code>&gt;&gt;K2q</code> to do the conversion for ERS, Envisat I2 swath or ALOS.</li>
</ul>
<p>Display the estimate of <strong>master atmosphere and orbit erroe AOE phase</strong> with</p>
<ul>
<li><code>&gt;&gt;ps plot('m')</code></li>
</ul>
<p>Display the phase ramps (if <code>scla_deramp</code> is set to ‘y’) with</p>
<ul>
<li><code>&gt;&gt;ps_plot('o')</code></li>
</ul>
<p>Unwrapped phase minus one of, or a combination of the above can be plotted with <code>u-d</code>, <code>u-m</code>, <code>u-o</code>, <code>u-dm</code>, <code>u-do</code> and <code>u-dmo</code>.</p>
<blockquote>
<p>After running step 7, check that the estimates seem reasonable, i.e. ps plot(‘u-dm’) looks generally smoother than ps plot(‘u’) (note that the default colour scales will be different). If not generally smoother, one or more interferograms have probably been incorrectly unwrapped (usually those with large perpendicular baselines)<a target="_blank" rel="noopener" href="https://github.com/dbekaert/StaMPS/releases/tag/v4.1-beta" title="StaMPS 4.1-beta Manual">4</a>.</p>
</blockquote>
<h2 id="post-stamps"><a class="markdownIt-Anchor" href="#post-stamps"></a> Post-StaMPS</h2>
<p>To convert the corrected LOS displacement from StaMPS into combined ascending and descending vertical displacement I have created a few python scripts to ease this process. The scripts can be downloaded from this git and meed to be adjusted to your folder system<a target="_blank" rel="noopener" href="https://github.com/gjvanleeuwen/SNAP-StaMPS-Visualizing" title="SNAP-StaMPS workflow documentation">5</a>.</p>
<p>first script to run is vertical_displacement_calculator.py second script to run is asc_desc_combiner.py.</p>
<h2 id="vertical-displacement"><a class="markdownIt-Anchor" href="#vertical-displacement"></a> Vertical Displacement</h2>
<blockquote>
<p>When all images are from the same track, you get the displacement along the line-of-sight (LOS) between the earth and the sensor. If you want to have vertical displacement, you need images from both ascending and descending tracks. There are lots of approaches to achieve this, some are  trightforward, others are more complex. At the moment, none of them is implemented in SNAP<a target="_blank" rel="noopener" href="https://forum.step.esa.int/t/matlab-script-for-determining-vertical-displacement-from-snap-stamps-ps-insar-ascending-and-descending-data/15408/8" title="STEP Forum">6</a>.</p>
</blockquote>
<h2 id="visualization"><a class="markdownIt-Anchor" href="#visualization"></a> Visualization</h2>
<p>Visualization of the data in this project is done using QGIS and Python. All scripts used can be found in this Git and shapefiles used can be requested by contacting me directly. Scripts will have to be adjusted to personal file structure and projections to be usable<a target="_blank" rel="noopener" href="https://github.com/gjvanleeuwen/SNAP-StaMPS-Visualizing" title="SNAP-StaMPS workflow documentation">5</a>.</p>
<h1 id="result"><a class="markdownIt-Anchor" href="#result"></a> Result</h1>
<h2 id="1st-attempt"><a class="markdownIt-Anchor" href="#1st-attempt"></a> 1st Attempt</h2>
<p>This attempt was resulted by all parameter set at <strong>default</strong>.</p>
<p><img src="StaMPS_v_do_1st.png" srcset="/img/loading.gif" lazyload alt="Feng_Pei velocity without DEM error and orbit error" /></p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/SAR/">SAR</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/InSAR/">InSAR</a>
                    
                      <a class="hover-with-bg" href="/tags/Land-Subsidence/">Land Subsidence</a>
                    
                      <a class="hover-with-bg" href="/tags/Sentinel1-A/">Sentinel1-A</a>
                    
                      <a class="hover-with-bg" href="/tags/PS-InSAR/">PS-InSAR</a>
                    
                      <a class="hover-with-bg" href="/tags/StaMPS-InSAR/">StaMPS-InSAR</a>
                    
                      <a class="hover-with-bg" href="/tags/Xuzhou/">Xuzhou</a>
                    
                      <a class="hover-with-bg" href="/tags/LiDO3/">LiDO3</a>
                    
                      <a class="hover-with-bg" href="/tags/snap2stamps/">snap2stamps</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/04/21/Post-StaMPS-Analysis-for-ENVISAT-Dataset-in-Xuzhou/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Post-StaMPS Analysis for ENVISAT Dataset in Xuzhou</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/04/14/Setup-and-Problem-Solving-in-WSL2/">
                        <span class="hidden-mobile">Setup and Problem-Solving in WSL2</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;TOC</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
        typing(title);
      
    })(window, document);
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
